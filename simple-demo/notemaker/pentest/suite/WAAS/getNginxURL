#!/bin/bash

nginx=''

# check for nginx-service which is utilized in EKS
if [ "$useOpenShift" = "true" ]; then
  nginx=$(oc get route | grep -v HOST | awk '{print $2}')
else
  nginx=$(kubectl get svc -n notemaker | grep LoadBalancer | grep nginx-service | awk '{ print $4 }')
fi

# if not present, just check for nginx
[[ -z $nginx ]] && nginx=$(kubectl get svc -n notemaker | grep LoadBalancer | grep nginx | awk '{ print $4 }')

# make sure we found the nginx web proxy URL
[[ -z $nginx ]] && echo "Problem determining URL for nginx web proxy service, exiting!" && exit 1
echo $nginx
exit 0

